<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GCT Blog Posts Module Preview</title>
    <link href="https://fonts.googleapis.com/css2?family=Libre+Franklin:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/gct-blog-posts-module.css">
    <style>
        /* Preview styles to mimic WordPress/Divi environment */
        body {
            font-family: 'Libre Franklin', Helvetica, Arial, Lucida, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            padding: 0;
            margin: 0;
        }
        
        .container {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
        }
        
        .preview-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        
        .preview-header h1 {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .preview-header p {
            font-size: 16px;
            color: #666;
        }
        
        .gct_blog_posts {
            margin-bottom: 60px;
        }
        
        /* Module styles */
        .gct-module-title {
            margin-bottom: 30px;
            font-size: 32px;
            font-family: 'Libre Franklin', Helvetica, Arial, Lucida, sans-serif;
            color: #000;
            font-weight: 600;
        }
        
        .gct-blog-posts-grid {
            display: grid;
            grid-gap: 30px;
        }
        
        .posts-per-row-3 {
            grid-template-columns: repeat(3, 1fr);
        }
        
        .posts-per-row-2 {
            grid-template-columns: repeat(2, 1fr);
        }
        
        .gct-post-item {
            transition: all 0.3s ease;
            position: relative;
        }
        
        .gct-post-meta-top {
            position: absolute;
            top: 200px;
            right: 10px;
            z-index: 5;
        }
        
        .gct-post-meta-top .gct-post-category {
            display: inline-block;
            padding: 5px 10px;
            background-color: #fff;
            color: #244B45;
            font-size: 12px;
            font-weight: 600;
            border-radius: 3px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            font-family: 'Libre Franklin', Helvetica, Arial, Lucida, sans-serif;
        }
        
        .gct-post-thumbnail {
            display: block;
            position: relative;
            height: 240px;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-color: #f5f5f5;
        }
        
        .gct-post-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            background-color: rgba(0, 0, 0, 0.5);
        }
        
        .gct-post-thumbnail:hover .gct-post-overlay {
            opacity: 1;
        }
        
        .et-pb-icon {
            color: #ffffff;
            font-size: 32px;
        }
        
        .gct-post-content {
            padding: 20px 0;
        }
        
        .gct-post-meta {
            margin-bottom: 10px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .gct-post-category {
            display: inline-block;
            padding: 3px 8px;
            background-color: #f0f0f0;
            color: #666;
            font-size: 12px;
            border-radius: 3px;
        }
        
        .gct-post-date {
            font-size: 14px;
            color: #999;
            font-family: 'Libre Franklin', Helvetica, Arial, Lucida, sans-serif;
        }
        
        .gct-post-title {
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 20px;
            line-height: 1.3;
            font-family: 'Libre Franklin', Helvetica, Arial, Lucida, sans-serif;
        }
        
        .gct-post-title a {
            color: #244B45;
            text-decoration: none;
        }
        
        .gct-post-excerpt {
            font-size: 16px;
            line-height: 1.5;
            color: #666;
            font-family: 'Libre Franklin', Helvetica, Arial, Lucida, sans-serif;
        }
        
        .gct-category-filter {
            margin-bottom: 30px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 10px;
        }
        
        .gct-category-filter label {
            font-weight: normal;
            font-size: 16px;
            color: #000;
            font-family: 'Libre Franklin', Helvetica, Arial, Lucida, sans-serif;
        }
        
        .gct-category-filter select {
            padding: 8px 30px 8px 12px;
            background-color: #eee;
            border: none;
            border-radius: 0;
            font-size: 16px;
            font-family: 'Libre Franklin', Helvetica, Arial, Lucida, sans-serif;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3Cpath d='M12 13.172l4.95-4.95 1.414 1.414L12 16 5.636 9.636 7.05 8.222z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 16px;
            min-width: 240px;
            color: #000;
        }
        
        .gct-pagination {
            margin-top: 40px;
            display: flex;
            /* justify-content: center; */
            flex-wrap: wrap;
            gap: 5px;
        }
        
        .gct-pagination a {
            display: inline-block;
            padding: 8px 16px;
            margin: 0 5px;
            text-decoration: none;
            border-radius: 4px;
            transition: all 0.3s ease;
        }
        
        /* .gct-pagination a.active {
            background-color: #2ea3f2;
            color: #fff;
        } */
        
        
        .gct-pagination a.active:hover {
            background-color: #0c71c3;
        }
        
        .gct-load-more {
            display: inline-block;
            padding: 12px 35px;
            background-color: #F6941C;
            color: #ffffff;
            text-decoration: none;
            border-radius: 4px;
            transition: all 0.3s ease;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            font-family: 'Libre Franklin', Helvetica, Arial, Lucida, sans-serif;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .gct-load-more:hover {
            background-color: #244B45;
            color: #ffffff;
            box-shadow: 0 3px 8px rgba(0,0,0,0.15);
        }
        
        .gct-load-more.loading {
            background-color: #F6941C;
            opacity: 0.8;
            color: #ffffff;
            cursor: wait;
        }
        
        /* Responsive styles */
        @media (max-width: 980px) {
            .gct-blog-posts-grid {
                grid-template-columns: repeat(2, 1fr) !important;
            }
        }
        
        @media (max-width: 767px) {
            .gct-blog-posts-grid {
                grid-template-columns: repeat(1, 1fr) !important;
            }
        }
        
        /* Divi icon font simulation */
        @font-face {
            font-family: 'ETmodules';
            src: url('https://www.elegantthemes.com/icons/modules.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }
        
        .et-pb-icon {
            font-family: 'ETmodules';
            speak: none;
            font-weight: normal;
            font-variant: normal;
            text-transform: none;
            line-height: 1;
            -webkit-font-smoothing: antialiased;
        }
        
        /* Responsive controls */
        .preview-controls {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            gap: 10px;
        }
        
        .preview-controls button {
            padding: 8px 15px;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s ease;
        }
        
        .preview-controls button:hover {
            background-color: #e0e0e0;
        }
        
        .preview-controls button.active {
            background-color: #2ea3f2;
            color: white;
            border-color: #2ea3f2;
        }

        /* Style for the pagination types selector */
        .pagination-type-selector {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            gap: 10px;
        }

        .pagination-type-selector button {
            padding: 6px 12px;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .pagination-type-selector button:hover {
            background-color: #e0e0e0;
        }

        .pagination-type-selector button.active {
            background-color: #2ea3f2;
            color: white;
            border-color: #2ea3f2;
        }

        /* Numbered pagination styles */
        .gct-pagination.numbers-pagination {
            justify-content: center;
            flex-wrap: wrap;
            gap: 5px;
        }

        .gct-pagination.numbers-pagination a {
            display: inline-block;
            padding: 8px 16px;
            margin: 0 5px;
            color: #666;
            background-color: #f0f0f0;
            text-decoration: none;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .gct-pagination.numbers-pagination a.active {
            background-color: #2ea3f2;
            color: #fff;
        }

        .gct-pagination.numbers-pagination a:hover {
            background-color: #e0e0e0;
        }

        .gct-pagination.numbers-pagination a.active:hover {
            background-color: #0c71c3;
        }

        /* Prev/Next pagination styles */
        .gct-pagination.prev-next-pagination {
            justify-content: space-between;
            margin-top: 40px;
        }

        .gct-pagination.prev-next-pagination a {
            display: inline-block;
            padding: 10px 20px;
            background-color: #f0f0f0;
            color: #666;
            text-decoration: none;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .gct-pagination.prev-next-pagination a:hover {
            background-color: #e0e0e0;
        }

        .gct-pagination.prev-next-pagination a.disabled {
            opacity: 0.5;
            cursor: default;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="preview-header">
            <h1>GCT Blog Posts Module Preview</h1>
            <p>This is a preview of how the module will look on your website.</p>
        </div>
        
        <div class="preview-controls">
            <button class="view-btn active" data-width="desktop">Desktop</button>
            <button class="view-btn" data-width="tablet">Tablet</button>
            <button class="view-btn" data-width="mobile">Mobile</button>
        </div>
        
        <div class="pagination-type-selector">
            <button class="pagination-btn active" data-pagination-type="load_more">Load More</button>
            <button class="pagination-btn" data-pagination-type="numbers">Numbers</button>
            <button class="pagination-btn" data-pagination-type="prev_next">Prev/Next</button>
        </div>
        
        <!-- Module Preview -->
        <div class="gct_blog_posts">
            <div class="gct-blog-posts-container" data-post-type="post" data-posts-per-page="6" data-module-settings='{"show_category": "on", "show_date": "on", "show_excerpt": "on", "pagination_type": "load_more", "load_more_text": "See more"}'>
                <h2 class="gct-module-title">Latest News</h2>
                
                <!-- Category Filter -->
                <div class="gct-category-filter">
                    <label>Category</label>
                    <select class="gct-category-select" data-taxonomy="category">
                        <option value="all">All Categories</option>
                        <option value="1">Announcements</option>
                        <option value="2">Operational updates</option>
                        <option value="3">General</option>
                    </select>
                </div>
                
                <div class="gct-posts-wrapper">
                    <!-- Posts Grid -->
                    <div class="gct-blog-posts-grid posts-per-row-3">
                        <!-- Post 1 -->
                        <article class="gct-post-item">
                            <div class="gct-post-meta-top">
                                <span class="gct-post-category">Announcements</span>
                            </div>
                            <a href="#" class="gct-post-thumbnail" style="background-image:url('https://picsum.photos/600/400?random=1');">
                                <div class="gct-post-overlay">
                                    <!-- Removing the icon -->
                                </div>
                            </a>
                            <div class="gct-post-content">
                                <div class="gct-post-meta">
                                    <div class="gct-post-date">February 26, 2025</div>
                                </div>
                                <h3 class="gct-post-title"><a href="#">Official site name approved – Welcome to Harkness Memorial Park</a></h3>
                                <div class="gct-post-excerpt">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut elit tellus, luctus nec ullamcorper mattis, pulvinar dapibus leo.</div>
                            </div>
                        </article>
                        
                        <!-- Post 2 -->
                        <article class="gct-post-item">
                            <div class="gct-post-meta-top">
                                <span class="gct-post-category">Operational updates</span>
                            </div>
                            <a href="#" class="gct-post-thumbnail" style="background-image:url('https://picsum.photos/600/400?random=2');">
                                <div class="gct-post-overlay">
                                    <!-- Removing the icon -->
                                </div>
                            </a>
                            <div class="gct-post-content">
                                <div class="gct-post-meta">
                                    <div class="gct-post-date">March 26, 2025</div>
                                </div>
                                <h3 class="gct-post-title"><a href="#">New grave construction works underway at Keilor Cemetery</a></h3>
                                <div class="gct-post-excerpt">Nulla vitae elit libero, a pharetra augue. Sed posuere consectetur est at lobortis. Cras mattis consectetur purus sit amet fermentum.</div>
                            </div>
                        </article>
                        
                        <!-- Post 3 -->
                        <article class="gct-post-item">
                            <div class="gct-post-meta-top">
                                <span class="gct-post-category">Announcements</span>
                            </div>
                            <a href="#" class="gct-post-thumbnail" style="background-image:url('https://picsum.photos/600/400?random=3');">
                                <div class="gct-post-overlay">
                                    <!-- Removing the icon -->
                                </div>
                            </a>
                            <div class="gct-post-content">
                                <div class="gct-post-meta">
                                    <div class="gct-post-date">March 17, 2025</div>
                                </div>
                                <h3 class="gct-post-title"><a href="#">A tribute to David Cragg, former Trust member</a></h3>
                                <div class="gct-post-excerpt">Maecenas sed diam eget risus varius blandit sit amet non magna. Aenean lacinia bibendum nulla sed consectetur.</div>
                            </div>
                        </article>
                        
                        <!-- Post 4 -->
                        <article class="gct-post-item">
                            <div class="gct-post-meta-top">
                                <span class="gct-post-category">Operational updates</span>
                            </div>
                            <a href="#" class="gct-post-thumbnail" style="background-image:url('https://picsum.photos/600/400?random=4');">
                                <div class="gct-post-overlay">
                                    <!-- Removing the icon -->
                                </div>
                            </a>
                            <div class="gct-post-content">
                                <div class="gct-post-meta">
                                    <div class="gct-post-date">January 12, 2025</div>
                                </div>
                                <h3 class="gct-post-title"><a href="#">Front entrance improvement works at Fawkner Memorial Park</a></h3>
                                <div class="gct-post-excerpt">Donec id elit non mi porta gravida at eget metus. Cum sociis natoque penatibus et magnis dis parturient montes.</div>
                            </div>
                        </article>
                        
                        <!-- Post 5 -->
                        <article class="gct-post-item">
                            <div class="gct-post-meta-top">
                                <span class="gct-post-category">Announcements</span>
                            </div>
                            <a href="#" class="gct-post-thumbnail" style="background-image:url('https://picsum.photos/600/400?random=5');">
                                <div class="gct-post-overlay">
                                    <!-- Removing the icon -->
                                </div>
                            </a>
                            <div class="gct-post-content">
                                <div class="gct-post-meta">
                                    <div class="gct-post-date">December 5, 2024</div>
                                </div>
                                <h3 class="gct-post-title"><a href="#">Principal Design Consultant appointed for memorial park development in Harkness</a></h3>
                                <div class="gct-post-excerpt">Vestibulum id ligula porta felis euismod semper. Nullam quis risus eget urna mollis ornare vel eu leo.</div>
                            </div>
                        </article>
                        
                        <!-- Post 6 -->
                        <article class="gct-post-item">
                            <div class="gct-post-meta-top">
                                <span class="gct-post-category">General</span>
                            </div>
                            <a href="#" class="gct-post-thumbnail" style="background-image:url('https://picsum.photos/600/400?random=6');">
                                <div class="gct-post-overlay">
                                    <!-- Removing the icon -->
                                </div>
                            </a>
                            <div class="gct-post-content">
                                <div class="gct-post-meta">
                                    <div class="gct-post-date">November 27, 2024</div>
                                </div>
                                <h3 class="gct-post-title"><a href="#">Thank you for attending our Annual Meeting</a></h3>
                                <div class="gct-post-excerpt">Curabitur blandit tempus porttitor. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio.</div>
                            </div>
                        </article>
                    </div>
                    
                    <!-- Pagination -->
                    <div class="gct-pagination">
                        <a href="#" class="gct-load-more" data-page="2">See more</a>
                    </div>
                </div>
            </div>
        </div>
        
        <hr>
        
        <!-- Module Preview with Numbered Pagination (initially hidden) -->
        <div class="gct_blog_posts" style="display: none;" id="numbers-pagination-example">
            <div class="gct-blog-posts-container" data-post-type="post" data-posts-per-page="6" data-module-settings='{"show_category": "on", "show_date": "on", "show_excerpt": "on", "pagination_type": "numbers"}'>
                <h2 class="gct-module-title">Blog Posts with Numbered Pagination</h2>
                
                <!-- Category Filter -->
                <div class="gct-category-filter">
                    <label>Category</label>
                    <select class="gct-category-select" data-taxonomy="category">
                        <option value="all">All Categories</option>
                        <option value="1">Announcements</option>
                        <option value="2">Operational updates</option>
                        <option value="3">General</option>
                    </select>
                </div>
                
                <div class="gct-posts-wrapper">
                    <!-- Posts Grid (same posts as above) -->
                    <div class="gct-blog-posts-grid posts-per-row-3">
                        <!-- Post content will be cloned from the first example -->
                    </div>
                    
                    <!-- Numbered Pagination -->
                    <div class="gct-pagination numbers-pagination">
                        <a href="#" class="active" data-page="1">1</a>
                        <a href="#" data-page="2">2</a>
                        <a href="#" data-page="3">3</a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Module Preview with Prev/Next Pagination (initially hidden) -->
        <div class="gct_blog_posts" style="display: none;" id="prev-next-pagination-example">
            <div class="gct-blog-posts-container" data-post-type="post" data-posts-per-page="6" data-module-settings='{"show_category": "on", "show_date": "on", "show_excerpt": "on", "pagination_type": "prev_next"}'>
                <h2 class="gct-module-title">Blog Posts with Prev/Next Pagination</h2>
                
                <!-- Category Filter -->
                <div class="gct-category-filter">
                    <label>Category</label>
                    <select class="gct-category-select" data-taxonomy="category">
                        <option value="all">All Categories</option>
                        <option value="1">Announcements</option>
                        <option value="2">Operational updates</option>
                        <option value="3">General</option>
                    </select>
                </div>
                
                <div class="gct-posts-wrapper">
                    <!-- Posts Grid (same posts as above) -->
                    <div class="gct-blog-posts-grid posts-per-row-3">
                        <!-- Post content will be cloned from the first example -->
                    </div>
                    
                    <!-- Prev/Next Pagination -->
                    <div class="gct-pagination prev-next-pagination">
                        <a href="#" class="gct-pagination-prev disabled" data-page="0">← Previous</a>
                        <a href="#" class="gct-pagination-next" data-page="2">Next →</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript to simulate module functionality -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        // Create a mock version of the WordPress AJAX parameters
        var gct_blog_posts_params = {
            ajaxurl: '#',
            nonce: 'preview-nonce'
        };
    </script>
    <script src="js/gct-blog-posts-module.js"></script>
    <script>
        $(document).ready(function() {
            // Clone posts to other examples
            const originalPosts = $('.gct_blog_posts:first-child .gct-post-item').clone();
            $('#numbers-pagination-example .gct-blog-posts-grid').html(originalPosts);
            $('#prev-next-pagination-example .gct-blog-posts-grid').html(originalPosts.clone());
            
            // Responsive preview controls
            $('.view-btn').on('click', function() {
                $('.view-btn').removeClass('active');
                $(this).addClass('active');
                
                const viewportWidth = $(this).data('width');
                const $container = $('.container');
                
                switch(viewportWidth) {
                    case 'desktop':
                        $container.css('max-width', '1200px');
                        break;
                    case 'tablet':
                        $container.css('max-width', '768px');
                        break;
                    case 'mobile':
                        $container.css('max-width', '480px');
                        break;
                }
            });
            
            // Pagination type selector
            $('.pagination-btn').on('click', function() {
                $('.pagination-btn').removeClass('active');
                $(this).addClass('active');
                
                const paginationType = $(this).data('pagination-type');
                
                // Hide all examples and show the selected one
                $('.gct_blog_posts').hide();
                
                if (paginationType === 'load_more') {
                    $('.gct_blog_posts:first-child').show();
                } else if (paginationType === 'numbers') {
                    $('#numbers-pagination-example').show();
                } else if (paginationType === 'prev_next') {
                    $('#prev-next-pagination-example').show();
                }
            });
            
            // Override the AJAX functionality for preview purposes
            $.ajax = function(options) {
                // Simulate successful AJAX response with a delay
                setTimeout(function() {
                    const paginationType = $('.pagination-btn.active').data('pagination-type');
                    const data = options.data;
                    const categoryId = data.category_id;
                    const page = data.page;
                    
                    // Generate sample posts HTML
                    let postsHTML = '';
                    
                    // Create a different number of posts based on category selection to simulate filtering
                    let postsCount = 6;
                    
                    if (categoryId !== 'all') {
                        // Simulate fewer posts for specific categories
                        if (categoryId === '3') { // General category
                            postsCount = 2;
                        } else if (categoryId === '2') { // Operational updates
                            postsCount = 3;
                        }
                    }
                    
                    // Clone and modify posts for the response
                    const $existingPosts = $('.gct-post-item');
                    for (let i = 0; i < postsCount; i++) {
                        const randomPost = Math.floor(Math.random() * $existingPosts.length);
                        const $clonedPost = $($existingPosts[randomPost]).clone();
                        
                        // Update image to be unique
                        const randomNum = Math.floor(Math.random() * 100) + 20;
                        $clonedPost.find('.gct-post-thumbnail').css('background-image', 'url(https://picsum.photos/600/400?random=' + randomNum + ')');
                        
                        // If category is selected, make sure posts match that category
                        if (categoryId !== 'all') {
                            let categoryName;
                            switch(categoryId) {
                                case '1': categoryName = 'Announcements'; break;
                                case '2': categoryName = 'Operational updates'; break;
                                case '3': categoryName = 'General'; break;
                                default: categoryName = 'Announcements';
                            }
                            $clonedPost.find('.gct-post-meta-top .gct-post-category').text(categoryName);
                        }
                        
                        postsHTML += $clonedPost[0].outerHTML;
                    }
                    
                    // Create a full HTML structure including pagination
                    let responseHTML = '<div class="gct-blog-posts-grid posts-per-row-3">' + postsHTML + '</div>';
                    
                    // Add appropriate pagination based on type
                    if (paginationType === 'load_more') {
                        // Only add "See more" button if not at final page
                        if (page < 3) {
                            responseHTML += '<div class="gct-pagination"><a href="#" class="gct-load-more" data-page="' + (page + 1) + '">See more</a></div>';
                        } else {
                            responseHTML += '<div class="gct-pagination"></div>';
                        }
                    } else if (paginationType === 'numbers') {
                        responseHTML += '<div class="gct-pagination numbers-pagination">';
                        for (let i = 1; i <= 3; i++) {
                            const activeClass = (i === page) ? 'active' : '';
                            responseHTML += '<a href="#" class="' + activeClass + '" data-page="' + i + '">' + i + '</a>';
                        }
                        responseHTML += '</div>';
                    } else if (paginationType === 'prev_next') {
                        responseHTML += '<div class="gct-pagination prev-next-pagination">';
                        
                        // Prev button, disabled if on first page
                        const prevDisabled = (page <= 1) ? 'disabled' : '';
                        responseHTML += '<a href="#" class="gct-pagination-prev ' + prevDisabled + '" data-page="' + (page - 1) + '">← Previous</a>';
                        
                        // Next button, disabled if on last page
                        const nextDisabled = (page >= 3) ? 'disabled' : '';
                        responseHTML += '<a href="#" class="gct-pagination-next ' + nextDisabled + '" data-page="' + (page + 1) + '">Next →</a>';
                        
                        responseHTML += '</div>';
                    }
                    
                    // Call the success callback with our simulated response
                    if (options.success) {
                        options.success({
                            success: true,
                            data: {
                                html: responseHTML
                            }
                        });
                    }
                }, 1000);
            };
            
            // Initialize the module functionality
            initGCTBlogPostsModule();
            
            // Extend the module functionality for the pagination examples
            $('.gct-pagination.numbers-pagination a').on('click', function(e) {
                e.preventDefault();
                
                const $link = $(this);
                const $container = $link.closest('.gct-blog-posts-container');
                const postType = $container.data('post-type');
                const postsPerPage = $container.data('posts-per-page');
                const page = $link.data('page');
                let categoryId = 'all';
                let taxonomy = 'category';
                
                // Get current category if set
                const $select = $container.find('.gct-category-select');
                if ($select.length) {
                    categoryId = $select.val();
                    taxonomy = $select.data('taxonomy');
                }
                
                // Get and replace posts with filtered ones
                getFilteredPosts($container, postType, taxonomy, categoryId, postsPerPage, page, false);
            });
            
            $('.gct-pagination.prev-next-pagination a').on('click', function(e) {
                e.preventDefault();
                
                if ($(this).hasClass('disabled')) {
                    return false;
                }
                
                const $link = $(this);
                const $container = $link.closest('.gct-blog-posts-container');
                const postType = $container.data('post-type');
                const postsPerPage = $container.data('posts-per-page');
                const page = $link.data('page');
                let categoryId = 'all';
                let taxonomy = 'category';
                
                // Get current category if set
                const $select = $container.find('.gct-category-select');
                if ($select.length) {
                    categoryId = $select.val();
                    taxonomy = $select.data('taxonomy');
                }
                
                // Get and replace posts with filtered ones
                getFilteredPosts($container, postType, taxonomy, categoryId, postsPerPage, page, false);
            });
            
            // Helper function to get filtered posts
            function getFilteredPosts($container, postType, taxonomy, categoryId, postsPerPage, page, append = false) {
                const $postsWrapper = $container.find('.gct-posts-wrapper');
                const paginationType = $('.pagination-btn.active').data('pagination-type');
                
                // Add loading state
                if (paginationType === 'load_more') {
                    const $loadMoreButton = $container.find('.gct-load-more');
                    if ($loadMoreButton.length) {
                        $loadMoreButton.text('Loading...').addClass('loading');
                    }
                }
                
                // Get module settings from data attribute to maintain consistency
                let moduleSettings = $container.data('module-settings');
                
                const data = {
                    action: 'gct_get_filtered_posts',
                    nonce: gct_blog_posts_params.nonce,
                    post_type: postType,
                    taxonomy: taxonomy,
                    category_id: categoryId,
                    posts_per_page: postsPerPage,
                    page: page,
                    module_settings: moduleSettings
                };
                
                $.ajax({
                    url: gct_blog_posts_params.ajaxurl,
                    type: 'POST',
                    data: data,
                    success: function(response) {
                        if (response.success) {
                            // If we're appending posts (See more button)
                            if (append) {
                                // Extract the posts from the HTML response
                                const $newContent = $(response.data.html);
                                const $newPosts = $newContent.find('.gct-post-item');
                                
                                // Append the new posts to the existing grid
                                $container.find('.gct-blog-posts-grid').append($newPosts);
                                
                                // Check if there's pagination in the response
                                const $newPagination = $newContent.find('.gct-pagination');
                                
                                // If there's no pagination in the response, remove the existing pagination
                                // This means we've loaded all posts
                                if ($newPagination.length === 0) {
                                    $container.find('.gct-pagination').remove();
                                } else {
                                    // Otherwise, replace the pagination (for updating the See more button)
                                    $container.find('.gct-pagination').replaceWith($newPagination);
                                }
                            } else {
                                // Replace the entire content (category change)
                                $postsWrapper.html(response.data.html);
                            }
                        }
                    }
                });
            }
        });
    </script>
</body>
</html>